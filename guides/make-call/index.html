<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Language" content="en-us" />
  <meta http-equiv="imagetoolbar" content="false" />
  <meta name="MSSmartTagsPreventParsing" content="true" />
  <title>Make a call | SIP.js</title>
  <link rel="alternate" type="application/atom+xml" title="API Changes" href="/changes.atom" />
  <link href="/css/reset.css" rel="stylesheet" type="text/css" />
  <link href="/css/960.css" rel="stylesheet" type="text/css" />
  <link href="/css/uv_active4d.css" rel="stylesheet" type="text/css" />
  <link href="/shared/css/documentation.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/shared/css/pygments.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="/shared/js/jquery.js" type="text/javascript"></script>
  <script src="/shared/js/documentation.js" type="text/javascript"></script>
</head>


<body class="guides">
  <div id="header-wrapper">
  <div id="header">
    <div>
      <a class="logo" href="/">SIP.js</a>
      <ul class="nav">
        <li><a href="/sip-0.5.0-devel.min.js" class="nav-download" download="sip-0.5.0-devel.min.js">Download</a></li>
        <li><a href="https://github.com/onsip/sip.js">Github</a></li>
        <li><a href="/api/" class="nav-api">API</a></li>
        <li><a href="/guides/" class="nav-guides">Guides</a></li>
        <li><a href="/aboutus/" class="nav-aboutus">About Us</a></li>
        <li><a href="https://groups.google.com/forum/#!forum/sip_js">Support</a></li>
      </ul>
    </div>
  </div><!-- #header -->
</div><!-- #header-wrapper -->


  <div class="sub-nav">
    <h2>Guides</h2>
    <ul>
      <li><a href="/guides/" class="active">Guides</a></li>
    </ul>
  </div>

  <div id="wrapper">
    <div class="content">
      <h1 id="make-a-call">Make a Call</h1>

<ul id="markdown-toc">
<li><a href="#overview">Overview</a></li>
</ul><p>Let’s walk through core API concepts as we tackle some everyday use cases.</p>

<h2 id="overview">Overview</h2>

<h3 id="setup-and-video-elements">Setup and Video Elements</h3>

<p>In order to make a video call, we first need a way to display the video call on your screen.  We can use a video element for this.  The video element adds a standard way for browsers to display video over the internet without additional plugins. This makes video elements perfect for WebRTC. The local video stream should always be muted to prevent feedback.</p>

<p>In this example, within the &lt;body&gt; tags, we have a “remoteVideo” video element, to display the video of the person you are calling, as well as a “localVideo” video element, to display your video that you are sending to the person you are calling.  </p>

<p>We are also loading the SIPjs library, within the &lt;head&gt; tags.  We are not doing anything with the SIPjs library yet.</p>

<iframe style="width: 100%; height: 300px" src="http://jsfiddle.net/mgc2e/1/embedded/html,js,css,result/">
</iframe>

<h3 id="making-the-call">Making the Call</h3>

<p>These video elements are not useful if we aren’t calling anyone, so lets make a call.  </p>

<p>In order to make calls and send messages you must create a new anonymous SIP user agent.  We then must start the user agent.  After the user agent has connected to the sip server we can send an invite.  </p>

<iframe style="width: 100%; height: 410px" src="http://jsfiddle.net/T4Kv2/1/embedded/">
</iframe>

<h3 id="displaying-the-call">Displaying the Call</h3>

<p>Although we are now able to make calls, we are not yet displaying the videos on the screen.  To do this we need to attach the video streams that we are sending and receiving to the video elements that we added in the beginning.  </p>

<p>We cannot just immediately attach the media streams; we must first wait until the call begins.  To do this we need to catch the “accepted” SIP event and attach the media streams after this point.  </p>

<p>We have created a new function called onAccepted(), which is runs as soon as the call connects.  This function calls the “attachMediaStream” function on both media streams, and then plays both video elements.</p>

<p>The function “attachMediaStream” attaches the media stream to the video element.</p>

<iframe style="width: 100%; height: 600px" src="http://jsfiddle.net/qWmG7/1/embedded/">
</iframe>
    </div>

    <div id="js-sidebar" class="sidebar-shell">
      <div class="sidebar-module">
          <ul>
            <li><h3><a href="/guides/">Overview</a></h3></li>
            <li><h3><a href="/guides/make-call/">Make a Call</a></h3></li>
            <li><h3><a href="/guides/receive-call/">Receive a Call</a></h3></li>
          </ul>
      </div>
    </div>
  </div><!-- #wrapper -->

  <div id="footer" >
  <div class="lower_footer">
    <ul class="footer-cell">
      <li><a href="https://groups.google.com/forum/#!forum/sip_js">Mailing List</a></li>				
      <li><a href="https://github.com/onsip/sip.js/issues">Report Issues</a></li>							
    </ul>

    <span class="footer-cell">
      <a href="https://www.onsip.com" class="mega-icon mega-icon-invertocat"></a>
    </span>

    <ul class="footer-cell">
      <li><a href="https://onsip.com/blog">Blog</a></li>
      <li><a href="/aboutus/">About</a></li>
    </ul>
  </div>
  
  <div class="wrapper">
  </div>

</div><!-- /#footer -->

<script src="/shared/js/retina.js" type="text/javascript"></script>

</body>
</html>
