<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Language" content="en-us" />
  <meta http-equiv="imagetoolbar" content="false" />
  <meta name="MSSmartTagsPreventParsing" content="true" />
  <title>SIP.InviteContext | SIP.js</title>
  <link rel="alternate" type="application/atom+xml" title="API Changes" href="/changes.atom" />
  <link href="/css/reset.css" rel="stylesheet" type="text/css" />
  <link href="/css/960.css" rel="stylesheet" type="text/css" />
  <link href="/css/uv_active4d.css" rel="stylesheet" type="text/css" />
  <link href="/shared/css/documentation.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/shared/css/pygments.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="/shared/js/jquery.js" type="text/javascript"></script>
  <script src="/shared/js/documentation.js" type="text/javascript"></script>
</head>


<body class="api">
	<div id="header-wrapper">
  <div id="header">
    <div>
      <a class="logo" href="/">SIP.js:Developer</a>
      <ul class="nav">
        <li><a href="/" class="nav-overview">Homepage</a></li>
        <li><a href="/aboutus/" class="nav-aboutus">About Us</a></li>
        <li><a href="/api/" class="nav-api">API</a></li>
        <li><a href="/news/" class="nav-blog">News</a></li>
        <li><a href="/changelog/" class="nav-blog">Change Log</a></li>
        <li><a href="https://onsip.com/contact">Support</a></li>
      </ul>
    </div>
  </div><!-- #header -->
</div><!-- #header-wrapper -->

	
	<div class="sub-nav">
		<h2><a href="/api/">SIP.js</a></h2>
		
		<ul>
      <li><a href="/api/" class="active">Documentation</a></li>
      <li><a href="/guides/">Guides</a></li>
		</ul>
	</div>
	
  <div id="wrapper">
  	<div class="content">
    	<h1 id="sipinvitecontext">SIP.InviteContext</h1>

<p>The class SIP.InviteContext represents a WebRTC media (audio/video) session. It can be initiated by the local user or by a remote peer. TODO: explain context turning into session</p>

<ul id="markdown-toc">
<li><a href="#construction">Construction</a></li>
  <li>
<a href="#instance-attributes">Instance Attributes</a>    <ul>
<li><a href="#dialog"><code>dialog</code></a></li>
      <li><a href="#earlydialogs"><code>earlyDialogs</code></a></li>
      <li><a href="#rtcmediahandler"><code>rtcMediaHandler</code></a></li>
      <li><a href="#starttime"><code>start_time</code></a></li>
      <li><a href="#endtime"><code>end_time</code></a></li>
    </ul>
</li>
  <li>
<a href="#instance-methods-client">Instance Methods (Client)</a>    <ul>
<li><a href="#inviteoptions"><code>invite([options])</code></a></li>
      <li><a href="#canceloptions"><code>cancel([options])</code></a></li>
    </ul>
</li>
  <li>
<a href="#instance-methods-server">Instance Methods (Server)</a>    <ul>
<li><a href="#acceptoptions"><code>accept([options])</code></a></li>
      <li><a href="#preaccept"><code>preaccept()</code></a></li>
      <li><a href="#progressoptions"><code>progress([options])</code></a></li>
      <li><a href="#rejectoptions"><code>reject([options])</code></a></li>
    </ul>
</li>
  <li>
<a href="#instance-methods-both">Instance Methods (Both)</a>    <ul>
<li><a href="#senddtmftone-options"><code>sendDTMF(tone[, options])</code></a></li>
      <li><a href="#terminateoptions"><code>terminate([options])</code></a></li>
      <li><a href="#byeoptions"><code>bye([options])</code></a></li>
      <li><a href="#getlocalstreams"><code>getLocalStreams()</code></a></li>
      <li><a href="#getremotestreams"><code>getRemoteStreams()</code></a></li>
      <li><a href="#sendrequestmethod-options"><code>sendRequest(method[, options])</code></a></li>
      <li><a href="#refertarget-options"><code>refer(target[, options])</code></a></li>
    </ul>
</li>
  <li>
<a href="#events">Events</a>    <ul>
<li><a href="#onconnecting-function-responsecode-"><code>on('connecting', function (response,code) {})</code></a></li>
      <li><a href="#onprogress-function-data-"><code>on('progress', function (data) {})</code></a></li>
      <li><a href="#onaccepted-function-data-"><code>on('accepted', function (data) {})</code></a></li>
      <li><a href="#onrejected-function-data-"><code>on('rejected', function (data) {})</code></a></li>
      <li><a href="#onfailed-function-data-"><code>on('failed', function (data) {})</code></a></li>
      <li><a href="#onterminated-functionmessage-cause-"><code>on('terminated', function(message, cause) {})</code></a></li>
      <li><a href="#oncanceled-functionresponse-code-"><code>on('canceled', function(response, code) {})</code></a></li>
      <li><a href="#onreferred-functionresponse-"><code>on('referred', function(response) {})</code></a></li>
      <li><a href="#ondtmf-functiondtmf-request-"><code>.on('dtmf', function(dtmf, request) {})</code></a></li>
      <li><a href="#oninvite-function-"><code>on('invite', function() {})</code></a></li>
      <li><a href="#onpreaccepted-function--"><code>on('preaccepted', function () {})</code></a></li>
      <li><a href="#onbye-function-"><code>on('bye', function() {})</code></a></li>
    </ul>
</li>
</ul><h2 id="construction">Construction</h2>

<p>The InviteContext constructor is intended for internal use only.</p>

<h2 id="instance-attributes">Instance Attributes</h2>

<h3 id="dialog"><code>dialog</code></h3>

<p><code>SIP.Dialog</code> - The SIP dialog associated with the particular InviteContext</p>

<h3 id="earlydialogs"><code>earlyDialogs</code></h3>

<p><code>SIP.Dialog</code> - The early SIP dialogs associated with the particular InviteContext</p>

<h3 id="rtcmediahandler"><code>rtcMediaHandler</code></h3>

<p><code>SIP.RTCMediaHandler</code> - The WebRTC Media Handler for the InviteContext which has the local and remote streams</p>

<h3 id="starttime"><code>start_time</code></h3>

<p><code>DATE</code> - Date object indicating the time when the session started. Takes its value at the moment when the accepted event is fired.</p>

<h3 id="endtime"><code>end_time</code></h3>

<p><code>DATE</code> - Date object indicating the time when the session ended. Takes its value at the moment when terminated event was fired.</p>

<h2 id="instance-methods-client">Instance Methods (Client)</h2>

<h3 id="inviteoptions"><code>invite([options])</code></h3>

<p>Send an INVITE request. Based on the call set up, this may prompt the user for media. Returns this InviteClientContext. This is typically called by the <code>UA</code> in <code>ua.invite(...)</code>.</p>

<h4 id="parameters">Parameters</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>options</code></td>
      <td><code>Object</code></td>
      <td>Optional <code>Object</code> with extra parameters (see below).</td>
    </tr>
<tr>
<td><code>options.extraHeaders</code></td>
      <td>
<code>Array</code> of <code>Strings</code>
</td>
      <td>Extra SIP headers for the request.</td>
    </tr>
<tr>
<td><code>options.mediaConstraints</code></td>
      <td><code>Object</code></td>
      <td>
<code>Object</code> with two valid fields (<code>audio</code> and <code>video</code>) indicating whether the session is intended to use audio and/or video and the constraints to be used. Default value is both <code>audio</code> and <code>video</code> set to <code>true</code>.</td>
    </tr>
<tr>
<td><code>options.RTCConstraints</code></td>
      <td><code>Object</code></td>
      <td>Used similarly to <code>mediaConstraints</code>, but for the RTCMediaHandler</td>
    </tr>
<tr>
<td><code>options.inviteWithoutSdp</code></td>
      <td><code>Boolean</code></td>
      <td>Tells the InviteContext if the INVITE should be sent with or without sdp.</td>
    </tr>
<tr>
<td><code>options.anonymous</code></td>
      <td><code>Boolean</code></td>
      <td>Tells the InviteContext if the UA being used will be anonymous.</td>
    </tr>
<tr>
<td><code>options.body</code></td>
      <td><code>String</code></td>
      <td>represents the SIP message body (in case this parameter is set, a corresponding Content-Type header field must be set in <code>extraHeaders</code> field).</td>
    </tr>
</tbody>
</table><h4 id="returns">Returns</h4>

<table>
<thead><tr>
<th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>SIP.InviteContext</code></td>
      <td>This InviteContext</td>
    </tr></tbody>
</table><h3 id="canceloptions"><code>cancel([options])</code></h3>

<p>Sends a CANCEL request following an INVITE request that has not received a 2xx response. Returns this InviteClientContext.</p>

<h4 id="parameters-1">Parameters</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>options</code></td>
      <td><code>Object</code></td>
      <td>Optional <code>Object</code> with extra parameters (see below).</td>
    </tr>
<tr>
<td><code>options.status_code</code></td>
      <td><code>Number</code></td>
      <td>The SIP response code that will be used in the upcoming response instead of the default.</td>
    </tr>
<tr>
<td><code>options.reason_phrase</code></td>
      <td><code>String</code></td>
      <td>The SIP reason phrase.</td>
    </tr>
</tbody>
</table><h4 id="returns-1">Returns</h4>

<table>
<thead><tr>
<th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>SIP.InviteContext</code></td>
      <td>This InviteContext</td>
    </tr></tbody>
</table><h4 id="throws">Throws</h4>

<p>TypeError
INVALID_STATE_ERROR</p>

<h2 id="instance-methods-server">Instance Methods (Server)</h2>

<h3 id="acceptoptions"><code>accept([options])</code></h3>

<p>Reply to a received INVITE request with a 200 OK response. Based on the call set up, this may prompt the user for media. Returns this InviteServerContext. TODO: everything chains, do we need this last piece? I`m gonna stop doing it from here.</p>

<h4 id="parameters-2">Parameters</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>options</code></td>
      <td><code>Object</code></td>
      <td>Optional <code>Object</code> with extra parameters (see below).</td>
    </tr>
<tr>
<td><code>options.extraHeaders</code></td>
      <td>
<code>Array</code> of <code>Strings</code>
</td>
      <td>Extra SIP headers for the request.</td>
    </tr>
<tr>
<td><code>options.mediaConstraints</code></td>
      <td><code>Object</code></td>
      <td>
<code>Object</code> with two valid fields (<code>audio</code> and <code>video</code>) indicating whether the session is intended to use audio and/or video and the constraints to be used. Default value is both <code>audio</code> and <code>video</code> set to <code>true</code>.</td>
    </tr>
</tbody>
</table><h4 id="returns-2">Returns</h4>

<table>
<thead><tr>
<th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>SIP.InviteContext</code></td>
      <td>This InviteContext</td>
    </tr></tbody>
</table><h4 id="throws-1">Throws</h4>

<p>INVALID_STATE_ERROR</p>

<h3 id="preaccept"><code>preaccept()</code></h3>

<p>Reply to a received INVITE request with a provisional response (183 Session in Progress) after the user is prompted for media. This response contains the sdp of the UAS and is used to negotiate the media of the session before a final response is sent.</p>

<h4 id="returns-3">Returns</h4>

<table>
<thead><tr>
<th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>SIP.InviteContext</code></td>
      <td>This InviteContext</td>
    </tr></tbody>
</table><h3 id="progressoptions"><code>progress([options])</code></h3>

<p>Inherited from <code>SIP.ServerContext</code></p>

<h3 id="rejectoptions"><code>reject([options])</code></h3>

<p>Reject the received INVITE request. The default response is 480 Temporarily Unavailable.</p>

<h4 id="parameters-3">Parameters</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>options</code></td>
      <td><code>Object</code></td>
      <td>Optional <code>Object</code> with extra parameters (see below).</td>
    </tr>
<tr>
<td><code>options.status_code</code></td>
      <td><code>Number</code></td>
      <td>The SIP response code that will be used in the upcoming response instead of the default.</td>
    </tr>
<tr>
<td><code>options.reason_phrase</code></td>
      <td><code>String</code></td>
      <td>The SIP reason phrase.</td>
    </tr>
<tr>
<td><code>options.body</code></td>
      <td><code>String</code></td>
      <td>represents the SIP message body (in case this parameter is set, a corresponding Content-Type header field must be set in <code>extraHeaders</code> field).</td>
    </tr>
<tr>
<td><code>options.extraHeaders</code></td>
      <td>
<code>Array</code> of <code>Strings</code>
</td>
      <td>Extra SIP headers for the request.</td>
    </tr>
</tbody>
</table><h4 id="returns-4">Returns</h4>

<table>
<thead><tr>
<th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>SIP.InviteContext</code></td>
      <td>This InviteContext</td>
    </tr></tbody>
</table><h4 id="throws-2">Throws</h4>

<p>TypeError
INVALID_STATE_ERROR</p>

<h2 id="instance-methods-both">Instance Methods (Both)</h2>

<h3 id="senddtmftone-options"><code>sendDTMF(tone[, options])</code></h3>

<p>Send one or multiple DTMF tones making use of SIP INFO method.</p>

<h4 id="parameters-4">Parameters</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>tone</code></td>
      <td>
<code>String</code> or <code>Number</code>
</td>
      <td>One or multiple valid DTMF symbols. Converts <code>Number</code> to <code>String</code> using <code>toString()</code>.</td>
    </tr>
<tr>
<td><code>options</code></td>
      <td><code>Object</code></td>
      <td>Optional <code>Object</code> with extra parameters (see below).</td>
    </tr>
<tr>
<td><code>options.extraHeaders</code></td>
      <td><code>Array</code></td>
      <td>Optional <code>Array</code> of <code>Strings</code> with extra SIP headers for each INFO request.</td>
    </tr>
<tr>
<td><code>options.duration</code></td>
      <td><code>Number</code></td>
      <td>Positive decimal <code>Number</code> indicating the duration of the tone expressed in milliseconds. Default value is <code>100</code>.</td>
    </tr>
<tr>
<td><code>options.interToneGap</code></td>
      <td><code>Number</code></td>
      <td>Positive decimal <code>Number</code> indicating the interval between two tones expressed in milliseconds. Default value is <code>500</code>.</td>
    </tr>
</tbody>
</table><h4 id="throws-3">Throws</h4>

<p>TypeError
INVALID_STATE_ERROR</p>

<h4 id="returns-5">Returns</h4>

<table>
<thead><tr>
<th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>SIP.InviteContext</code></td>
      <td>This InviteContext</td>
    </tr></tbody>
</table><h4 id="example-1">Example 1</h4>

<div>
<div class="CodeRay">
  <div class="code"><pre>call.sendDTMF(<span style="color:#00D">1</span>);
call.sendDTMF(<span style="color:#00D">4</span>);
</pre></div>
</div>
</div>

<h4 id="example-2">Example 2</h4>

<div>
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">var</span> tones = <span style="color:#F00;background-color:#FAA">`</span><span style="color:#00D">1234</span><span style="color:#F00;background-color:#FAA">#</span><span style="color:#F00;background-color:#FAA">`</span>;

<span style="color:#080;font-weight:bold">var</span> extraHeaders = [ <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">X-Foo: foo</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">X-Bar: bar</span><span style="color:#710">'</span></span> ];

<span style="color:#080;font-weight:bold">var</span> options = {
  <span style="color:#606"><span style="color:#404">'</span><span>duration</span><span style="color:#404">'</span></span>: <span style="color:#00D">160</span>,
  <span style="color:#606"><span style="color:#404">'</span><span>interToneGap</span><span style="color:#404">'</span></span>: <span style="color:#00D">1200</span>,
  <span style="color:#606"><span style="color:#404">'</span><span>extraHeaders</span><span style="color:#404">'</span></span>: extraHeaders
};

call.sendDTMF(tones, options);
</pre></div>
</div>
</div>

<h3 id="terminateoptions"><code>terminate([options])</code></h3>

<p>Terminate the current session. Depending on the state of the session, this function may send a CANCEL request, a non-2xx final response, a BYE request, or even no request.</p>

<h4 id="parameters-5">Parameters</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>options</code></td>
      <td><code>Object</code></td>
      <td>Optional <code>Object</code> with extra parameters (see below).</td>
    </tr>
<tr>
<td><code>options.status_code</code></td>
      <td><code>Number</code></td>
      <td>The SIP response code that will be used in the upcoming response instead of the default.</td>
    </tr>
<tr>
<td><code>options.reason_phrase</code></td>
      <td><code>String</code></td>
      <td>The SIP reason phrase.</td>
    </tr>
<tr>
<td><code>options.body</code></td>
      <td><code>String</code></td>
      <td>represents the SIP message body (in case this parameter is set, a corresponding Content-Type header field must be set in <code>extraHeaders</code> field).</td>
    </tr>
<tr>
<td><code>options.extraHeaders</code></td>
      <td>
<code>Array</code> of <code>Strings</code>
</td>
      <td>Extra SIP headers for the request.</td>
    </tr>
</tbody>
</table><h4 id="returns-6">Returns</h4>

<table>
<thead><tr>
<th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>SIP.InviteContext</code></td>
      <td>This InviteContext</td>
    </tr></tbody>
</table><h4 id="throws-4">Throws</h4>

<p>TypeError
INVALID_STATE_ERROR</p>

<h3 id="byeoptions"><code>bye([options])</code></h3>

<p>Sends a BYE request on a confirmed session.</p>

<h4 id="parameters-6">Parameters</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>options</code></td>
      <td><code>Object</code></td>
      <td>Optional <code>Object</code> with extra parameters (see below).</td>
    </tr>
<tr>
<td><code>options.status_code</code></td>
      <td><code>Number</code></td>
      <td>The SIP response code that will be used in the upcoming response instead of the default.</td>
    </tr>
<tr>
<td><code>options.reason_phrase</code></td>
      <td><code>String</code></td>
      <td>The SIP reason phrase.</td>
    </tr>
<tr>
<td><code>options.body</code></td>
      <td><code>String</code></td>
      <td>represents the SIP message body (in case this parameter is set, a corresponding Content-Type header field must be set in <code>extraHeaders</code> field).</td>
    </tr>
<tr>
<td><code>options.extraHeaders</code></td>
      <td>
<code>Array</code> of <code>Strings</code>
</td>
      <td>Extra SIP headers for the request.</td>
    </tr>
</tbody>
</table><h4 id="throws-5">Throws</h4>

<p>TypeError
INVALID_STATE_ERROR</p>

<h3 id="getlocalstreams"><code>getLocalStreams()</code></h3>

<p>Returns a sequence of MediaStream objects representing the streams that are currently sent in this InviteContext.</p>

<h4 id="returns-7">Returns</h4>

<table>
<thead><tr>
<th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>Array of RTCMediaStream</code></td>
      <td>The local media stream</td>
    </tr></tbody>
</table><h3 id="getremotestreams"><code>getRemoteStreams()</code></h3>

<p>Returns a sequence of MediaStream objects representing the streams that are currently received in this InviteContext.</p>

<table>
<thead><tr>
<th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>Array of RTCMediaStream</code></td>
      <td>The remote media stream</td>
    </tr></tbody>
</table><h3 id="sendrequestmethod-options"><code>sendRequest(method[, options])</code></h3>

<p>Generic function that sends a <code>method</code> request.</p>

<h4 id="parameters-7">Parameters</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>method</code></td>
      <td><code>String</code></td>
      <td>The name of the SIP request to be sent</td>
    </tr>
<tr>
<td><code>options</code></td>
      <td><code>Object</code></td>
      <td>Optional <code>Object</code> with extra parameters (see below).</td>
    </tr>
<tr>
<td><code>options.extraHeaders</code></td>
      <td>
<code>Array</code> of <code>Strings</code>
</td>
      <td>Extra SIP headers for the request.</td>
    </tr>
<tr>
<td><code>options.eventHandlers</code></td>
      <td>TODO:FINISH</td>
      <td>TODO:FINISH</td>
    </tr>
</tbody>
</table><h4 id="returns-8">Returns</h4>

<table>
<thead><tr>
<th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>SIP.InviteContext</code></td>
      <td>This InviteContext</td>
    </tr></tbody>
</table><h3 id="refertarget-options"><code>refer(target[, options])</code></h3>

<p>Send a REFER request. The transfer that occurs can be attended or blind. An attended transfer is when you have there are two active call sessions and session A is being transferred to session B. Usually the person who is doing the transfer will talk to both session A and session B before making the transfer. A blind transfer is when the person who is doing the transfer will transfer the session without actually setting up the session to the receiving end. Usually the person making the transfer will not talk to the person receiving the transfer.</p>

<h4 id="parameters-8">Parameters</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>target</code></td>
      <td><code>SIP.InviteServerContext|SIP.InviteClientContext|String</code></td>
      <td>If the target is an InviteServerContext or InviteClientContext will start an attended transfer. Otherwise it will do a blind transfer.</td>
    </tr>
<tr>
<td><code>options</code></td>
      <td><code>Object</code></td>
      <td>Optional <code>Object</code> with extra parameters (see below).</td>
    </tr>
<tr>
<td><code>options.extraHeaders</code></td>
      <td>
<code>Array</code> of <code>Strings</code>
</td>
      <td>Extra SIP headers for the request.</td>
    </tr>
</tbody>
</table><h4 id="returns-9">Returns</h4>

<table>
<thead><tr>
<th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>SIP.InviteContext</code></td>
      <td>This InviteContext</td>
    </tr></tbody>
</table><h4 id="throws-6">Throws</h4>

<p>TypeError
INVALID_STATE_ERROR</p>

<h2 id="events">Events</h2>

<p><code>SIP.InviteContext</code> class defines a series of events. Each of them allows callback functions registration in order to let the user execute a handler for each given stimulus.</p>

<p>Every event handler is executed with a <a href="/api/devel/event/">SIP.Event</a> instance as the only argument.</p>

<h3 id="onconnecting-function-responsecode-"><code>on('connecting', function (response,code) {})</code></h3>

<p>Fired when ICE is starting to negotiate between the peers.</p>

<h4 id="event-data-fields">Event <code>data</code> fields</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>response</code></td>
      <td><code>Object</code></td>
      <td>
<a href="/api/devel/incomingResponse/"><code>SIP.IncomingResponse</code></a> instance of the received SIP 1XX response.</td>
    </tr>
<tr>
<td><code>code</code></td>
      <td> </td>
      <td>The SIP response code.</td>
    </tr>
</tbody>
</table><h3 id="onprogress-function-data-"><code>on('progress', function (data) {})</code></h3>

<p>Fired each time a provisional (100-199) response is received.</p>

<h4 id="arguments">Arguments</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>data</code></td>
      <td><code>Object</code></td>
      <td>A wrapper object containing the event data</td>
    </tr>
<tr>
<td><code>data.code</code></td>
      <td><code>Integer</code></td>
      <td>The status code of the received response, between 100 and 199.</td>
    </tr>
<tr>
<td><code>data.response</code></td>
      <td><a href="/api/devel/incomingResponse"><code>SIP.IncomingResponse</code></a></td>
      <td>The received response</td>
    </tr>
</tbody>
</table><h3 id="onaccepted-function-data-"><code>on('accepted', function (data) {})</code></h3>

<p>Fired each time a successful final (200-299) response is received.</p>

<h4 id="arguments-1">Arguments</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>data</code></td>
      <td><code>Object</code></td>
      <td>A wrapper object containing the event data</td>
    </tr>
<tr>
<td><code>data.code</code></td>
      <td><code>Integer</code></td>
      <td>The status code of the received response, between 200 and 299.</td>
    </tr>
<tr>
<td><code>data.response</code></td>
      <td><a href="/api/devel/incomingResponse"><code>SIP.IncomingResponse</code></a></td>
      <td>The received response</td>
    </tr>
</tbody>
</table><h3 id="onrejected-function-data-"><code>on('rejected', function (data) {})</code></h3>

<p>Fired each time an unsuccessful final (300-699) response is received. <em>Note: This will also emit a <code>failed</code> event.</em></p>

<h4 id="arguments-2">Arguments</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>data</code></td>
      <td><code>Object</code></td>
      <td>A wrapper object containing the event data</td>
    </tr>
<tr>
<td><code>data.code</code></td>
      <td><code>Integer</code></td>
      <td>The status code of the received response, between 300 and 699.</td>
    </tr>
<tr>
<td><code>data.response</code></td>
      <td><a href="/api/devel/incomingResponse/"><code>SIP.IncomingResponse</code></a></td>
      <td>The received response</td>
    </tr>
<tr>
<td><code>data.cause</code></td>
      <td><code>String</code></td>
      <td>The reason phrase associated with the SIP response code.</td>
    </tr>
</tbody>
</table><h3 id="onfailed-function-data-"><code>on('failed', function (data) {})</code></h3>

<p>Fired when the request fails, whether due to an unsuccessful final response or due to timeout, transport, or other error.</p>

<h4 id="arguments-3">Arguments</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>data</code></td>
      <td><code>Object</code></td>
      <td>A wrapper object containing the event data</td>
    </tr>
<tr>
<td><code>data.code</code></td>
      <td><code>Integer</code></td>
      <td>The status code of the received response, between 300 and 699, or 0 if the failure was not due to a received response.</td>
    </tr>
<tr>
<td><code>data.response</code></td>
      <td><a href="/api/devel/incomingResponse/"><code>SIP.IncomingResponse|null</code></a></td>
      <td>The received response, or <code>null</code> if there failure was not due to a received response.</td>
    </tr>
<tr>
<td><code>data.cause</code></td>
      <td><code>String</code></td>
      <td>The reason phrase associated with the SIP response code, or one of <code>SIP.C.causes</code> if the failure was not due to a received response.</td>
    </tr>
</tbody>
</table><h3 id="onterminated-functionmessage-cause-"><code>on('terminated', function(message, cause) {})</code></h3>

<p>Fired when an established call ends.</p>

<h4 id="event-data-fields-1">Event <code>data</code> fields</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>message</code></td>
      <td><code>Object</code></td>
      <td>
<a href="/api/devel/incomingResponse/"><code>SIP.IncomingResponse</code></a> instance of the received SIP 1XX response.</td>
    </tr>
<tr>
<td><code>cause</code></td>
      <td> </td>
      <td>One value of Failure and End Causes</td>
    </tr>
</tbody>
</table><h3 id="oncanceled-functionresponse-code-"><code>on('canceled', function(response, code) {})</code></h3>

<p>Fired when the session was canceled by the UAC.</p>

<h4 id="event-data-fields-2">Event <code>data</code> fields</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>response</code></td>
      <td><code>Object</code></td>
      <td>
<a href="/api/devel/incomingResponse/"><code>SIP.IncomingResponse</code></a> instance of the received SIP 1XX response.</td>
    </tr>
<tr>
<td><code>code</code></td>
      <td> </td>
      <td>The SIP response code.</td>
    </tr>
</tbody>
</table><table>
<thead><tr>
<th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>SIP.Invite</code></td>
      <td>This ClientContext</td>
    </tr></tbody>
</table><h3 id="onreferred-functionresponse-"><code>on('referred', function(response) {})</code></h3>

<p>Fired when the session was unable to establish.</p>

<h4 id="event-data-fields-3">Event <code>data</code> fields</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>response</code></td>
      <td><code>Object</code></td>
      <td>
<a href="/api/devel/incomingResponse/"><code>SIP.IncomingResponse</code></a> instance of the received SIP 1XX response.</td>
    </tr></tbody>
</table><h3 id="ondtmf-functiondtmf-request-"><code>.on('dtmf', function(dtmf, request) {})</code></h3>

<p>Fired for an incoming or outgoing DTMF.</p>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>dtmf</code></td>
      <td><code>Object</code></td>
      <td>
<a href="/api/devel/invite/dtmf/"><code>SIP.InviteContext.DTMF</code></a> instance.</td>
    </tr>
<tr>
<td><code>request</code></td>
      <td><code>Object</code></td>
      <td>
<a href="/api/devel/incomingRequest/"><code>SIP.IncomingRequest</code></a> instance of the received SIP INFO request.</td>
    </tr>
</tbody>
</table><h3 id="oninvite-function-"><code>on('invite', function() {})</code></h3>

<p>Fired when an invite is sent.</p>

<h3 id="onpreaccepted-function--"><code>on('preaccepted', function () {})</code></h3>

<p>Fired when a session is pre-accepted.</p>

<h3 id="onbye-function-"><code>on('bye', function() {})</code></h3>

<p>Fired when a BYE is sent.</p>
    </div>

		<div id="js-sidebar" class="sidebar-shell">
  <div class="js-toggle-list sidebar-module expandable">
    <ul>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel">Overview</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/#features">Features</a></li>
          <li><a href="/api/devel/#sip-standards">SIP Standards</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/ua/">SIP.UA</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/ua/#construction">Construction</a></li>
          <li><a href="/api/devel/ua/#generic-methods">Generic Methods</a></li>
          <li><a href="/api/devel/ua/#request-methods">Request Methods</a></li>
          <li><a href="/api/devel/ua/#events">Events</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/context/">Contexts</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/context/client/">SIP.ClientContext</a></li>
          <li><a href="/api/devel/context/server/">SIP.ServerContext</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/invite/">SIP.InviteContext</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/invite/#instantiation">Instantiation</a></li>
          <li><a href="/api/devel/invite/#instance-methods">Instance Methods</a></li>
          <li><a href="/api/devel/invite/#events">Events</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/message/">SIP.MessageContext</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/message/#instantiation">Instantiation</a></li>
          <li><a href="/api/devel/message/#instance-methods">Instance Methods</a></li>
          <li><a href="/api/devel/message/#events">Events</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/uri/">SIP.URI</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/uri/#instantiation">Instantiation</a></li>
          <li><a href="/api/devel/uri/#instance-methods">Instance Methods</a></li>
          <li><a href="/api/devel/uri/#events">Events</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/event/">SIP.Event</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/event/#instantiation">Instantiation</a></li>
          <li><a href="/api/devel/event/#instance-methods">Instance Methods</a></li>
          <li><a href="/api/devel/event/#events">Events</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/eventemitter/">SIP.EventEmitter</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/eventemitter/#construction">Construction</a></li>
          <li><a href="/api/devel/eventemitter/#public-methods">Public Methods</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/ua_configuration_parameters/">UA Configuration Parameters</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/ua_configuration_parameters/#mandatory">Mandatory Parameters</a></li>
          <li><a href="/api/devel/ua_configuration_parameters/#optional">Optional Parameters</a></li>
        </ul>
      </li>
    </ul>
  </div> <!-- /sidebar-module -->
</div><!-- /sidebar-shell -->

  </div><!-- #wrapper -->
		
	<div id="footer" >
  <div class="lower_footer">
    <ul class="footer-cell">
      <li><a href="http://help.onsip.com/terms-of-service/">Terms</a></li>
      <li><a href="http://help.onsip.com/privacy-policy/">Privacy</a></li>
      <li><a href="http://help.onsip.com/security/">Security</a></li>
      <li><a href="https://onsip.com/contact">Contact</a></li>				
    </ul>

    <span class="footer-cell">
      <a href="https://onsip.com" class="mega-icon mega-icon-invertocat"></a>
    </span>

    <ul class="footer-cell">
      <li><a href="https://status.onsip.com/">Status</a></li>
      <li><a href="http://training.onsip.com/">Training</a></li>
      <li><a href="http://shop.onsip.com/">Shop</a></li>
      <li><a href="https://onsip.com/blog">Blog</a></li>
      <li><a href="https://onsip.com/about">About</a></li>
    </ul>
  </div>
  
  <div class="wrapper">
    <p>Design &copy; <span class="js-year">2013</span> OnSIP, Inc. All rights reserved. Except where otherwise noted, content on this site is licensed under a <a href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons CC-BY license</a>.</p>
  </div>

</div><!-- /#footer -->

<script src="/shared/js/retina.js" type="text/javascript"></script>

</body>
</html>
