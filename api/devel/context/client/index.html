<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Language" content="en-us" />
  <meta http-equiv="imagetoolbar" content="false" />
  <meta name="MSSmartTagsPreventParsing" content="true" />
  <title>SIP.ClientContext | SIP.js</title>
  <link rel="alternate" type="application/atom+xml" title="API Changes" href="/changes.atom" />
  <link href="/css/reset.css" rel="stylesheet" type="text/css" />
  <link href="/css/960.css" rel="stylesheet" type="text/css" />
  <link href="/css/uv_active4d.css" rel="stylesheet" type="text/css" />
  <link href="/shared/css/documentation.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/shared/css/pygments.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="/shared/js/jquery.js" type="text/javascript"></script>
  <script src="/shared/js/documentation.js" type="text/javascript"></script>
</head>


<body class="api">
	<div id="header-wrapper">
  <div id="header">
    <div>
      <a class="logo" href="/">SIP.js</a>
      <ul class="nav">
        <li><a href="/download/" class="nav-download">Download</a></li>
        <li><a href="/api/" class="nav-api">API</a></li>
        <li><a href="/guides/" class="nav-guides">Guides</a></li>
        <li><a href="https://github.com/onsip/sip.js">Github</a></li>
        <li><a href="/aboutus/" class="nav-aboutus">About Us</a></li>
        <li><a href="https://groups.google.com/forum/#!forum/sip_js">Support</a></li>
      </ul>
    </div>
  </div><!-- #header -->
</div><!-- #header-wrapper -->

	
	<div class="sub-nav">
		<h2><a href="/api/devel/">Devel</a></h2>
		
		<ul>
      <li><a href="/api/">API</a></li>
      <li><a href="/api/devel/" class="active">Devel</a></li>
		</ul>
	</div>
	
  <div id="wrapper">
  	<div class="content">
    	<h1 id="sipclientcontext">SIP.ClientContext</h1>

<p>A <code>SIP.ClientContext</code> encapsulates the behavior required to send a request, as well as handle responses and retransmissions of that request. It is typically mixed in with behavior from a method-specific class, such as <a href="/api/devel/session/"><code>SIP.Session</code></a> or <a href="/api/devel/message/"><code>SIP.Message</code></a>.</p>

<ul id="markdown-toc">
<li>
<a href="#instance-attributes">Instance Attributes</a>    <ul>
<li><a href="#ua"><code>ua</code></a></li>
      <li><a href="#method"><code>method</code></a></li>
      <li><a href="#request"><code>request</code></a></li>
      <li><a href="#localidentity"><code>localIdentity</code></a></li>
      <li><a href="#remoteidentity"><code>remoteIdentity</code></a></li>
      <li><a href="#data"><code>data</code></a></li>
    </ul>
</li>
  <li>
<a href="#instance-methods">Instance Methods</a>    <ul>
<li><a href="#canceloptions"><code>cancel([options])</code></a></li>
    </ul>
</li>
  <li>
<a href="#events">Events</a>    <ul>
<li><a href="#progress"><code>progress</code></a></li>
      <li><a href="#accepted"><code>accepted</code></a></li>
      <li><a href="#rejected"><code>rejected</code></a></li>
      <li><a href="#failed"><code>failed</code></a></li>
    </ul>
</li>
</ul><!--
## Construction

Typically, construction and sending of a ClientContext is managed by a `SIP.UA`, through either the `ua.request(method, target)` function or through SIP method-specific functions such as `ua.invite(target)`. However, advanced users may construct ClientContexts manually.

### `new SIP.ClientContext(ua, method, target)`

#### Parameters

Name | Type | Description
-----|------|-------------
ua | `SIP.UA` | The user agent from which the request will be sent.
method | `String` | The SIP method to use on the request. For example, `INFO` or `OPTIONS`
target | `String|SIP.URI` | The destination URI for the request to send to.
--><h2 id="instance-attributes">Instance Attributes</h2>

<h3 id="ua"><code>ua</code></h3>

<p><a href="/api/devel/ua/"><code>SIP.UA</code></a> - The user agent from which the request was sent or will be sent.</p>

<h3 id="method"><code>method</code></h3>

<p><code>String</code> - The SIP method of the request. For example, <code>"INVITE"</code> or <code>"MESSAGE"</code>.</p>

<h3 id="request"><code>request</code></h3>

<p><a href="/api/devel/outgoingRequest/"><code>SIP.OutgoingRequest</code></a> - The request sent or to be sent.</p>

<h3 id="localidentity"><code>localIdentity</code></h3>

<p><a href="/api/devel/nameAddrHeader/"><code>SIP.NameAddrHeader</code></a> - The From header field value, representing the local endpoint. This is typically the URI of the UA as a <code>SIP.NameAddrHeader</code>.</p>

<h3 id="remoteidentity"><code>remoteIdentity</code></h3>

<p><a href="/api/devel/nameAddrHeader/"><code>SIP.NameAddrHeader</code></a> - The To header field value, representing the remote endpoint.</p>

<h3 id="data"><code>data</code></h3>

<p><code>Object</code> - An empty object.  Define custom application data here. <em>Note: SIP.js may overwrite any custom attributes defined outside of the data object.</em></p>

<h2 id="instance-methods">Instance Methods</h2>

<!--

### `send([options])`

Send the request. A constructed `SIP.ClientContext` will not send itself until this or a similar method is called. This method does not run any custom behavior outside of the default handling of the SIP request. For request methods with their own context objects, please use the method-specific functions for sending requests defined on those objects. (For example, [`SIP.InviteClientContext`](/api/devel/session/#inviteoptions) uses its `.invite()` method to send its request.)

#### Parameters

Name | Type | Description
-----|------|-------------
`options`|`Object`|Optional `Object` with extra parameters (see below).
`options.body`|`String`|Optional message body to send in the request
`options.extraHeaders`|`Array` of `String`|Optional list of extra SIP headers to include with the request
`options.params`|`Object`|Optional extra configuration parameters (see below). These parameters take priority over the SIP.UA configuration parameters.
`options.params.route_set`|`Array` of `String`|Optional preloaded route set for the request.
`options.params.to_display_name`|`String`|Optional display portion of SIP To: URI
`options.params.to_uri`|`String`|Optional To: URI. By default, this is set to the target.
`options.params.to_tag`|`String`|Optional To: tag.
`options.params.from_display_name`|`String`|Optional display portion of SIP From: URI
`options.params.from_uri`|`String`|Optional From: URI. By default, this is set to the UA's configured URI
`options.params.from_tag`|`String`|Optional From: tag
`options.params.call_id`|`String`|Optional Call-Id value. Otherwise, a new Call-Id is randomly generated.
`options.params.cseq`|`String`|Optional CSeq number.  Otherwise, a new random CSeq is generated

#### Returns

Type | Description
-|-
`SIP.ClientContext`| This ClientContext

-->

<h3 id="canceloptions"><code>cancel([options])</code></h3>

<p>Send a CANCEL before the original request has been accepted.</p>

<h4 id="parameters">Parameters</h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>options</code></td>
      <td><code>Object</code></td>
      <td>Optional <code>Object</code> with extra parameters (see below).</td>
    </tr>
<tr>
<td><code>options.status_code</code></td>
      <td><code>Number</code></td>
      <td>The SIP response code that will be used in the upcoming response instead of the default.</td>
    </tr>
<tr>
<td><code>options.reason_phrase</code></td>
      <td><code>String</code></td>
      <td>The SIP reason phrase.</td>
    </tr>
</tbody>
</table><h4 id="returns">Returns</h4>

<table>
<thead><tr>
<th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody><tr>
<td><code>SIP.ClientContext</code></td>
      <td>This ClientContext</td>
    </tr></tbody>
</table><h4 id="throws">Throws</h4>

<p>TypeError
INVALID_STATE_ERROR</p>

<h2 id="events">Events</h2>

<h3 id="progress"><code>progress</code></h3>

<p>Fired each time a provisional (100-199) response is received.</p>

<h4 id="onprogress-function-data-"><code>on('progress', function (data) {})</code></h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>data</code></td>
      <td><code>Object</code></td>
      <td>A wrapper object containing the event data</td>
    </tr>
<tr>
<td><code>data.code</code></td>
      <td><code>Integer</code></td>
      <td>The status code of the received response, between 100 and 199.</td>
    </tr>
<tr>
<td><code>data.response</code></td>
      <td><a href="/api/devel/incomingResponse"><code>SIP.IncomingResponse</code></a></td>
      <td>The received response</td>
    </tr>
</tbody>
</table><h3 id="accepted"><code>accepted</code></h3>

<p>Fired each time a successful final (200-299) response is received.</p>

<h4 id="onaccepted-function-data-"><code>on('accepted', function (data) {})</code></h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>data</code></td>
      <td><code>Object</code></td>
      <td>A wrapper object containing the event data</td>
    </tr>
<tr>
<td><code>data.code</code></td>
      <td><code>Integer</code></td>
      <td>The status code of the received response, between 200 and 299.</td>
    </tr>
<tr>
<td><code>data.response</code></td>
      <td><a href="/api/devel/incomingResponse"><code>SIP.IncomingResponse</code></a></td>
      <td>The received response</td>
    </tr>
</tbody>
</table><h3 id="rejected"><code>rejected</code></h3>

<p>Fired each time an unsuccessful final (300-699) response is received. <em>Note: This will also emit a <code>failed</code> event.</em></p>

<h4 id="onrejected-function-data-"><code>on('rejected', function (data) {})</code></h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>data</code></td>
      <td><code>Object</code></td>
      <td>A wrapper object containing the event data</td>
    </tr>
<tr>
<td><code>data.code</code></td>
      <td><code>Integer</code></td>
      <td>The status code of the received response, between 300 and 699.</td>
    </tr>
<tr>
<td><code>data.response</code></td>
      <td><a href="/api/devel/incomingResponse/"><code>SIP.IncomingResponse</code></a></td>
      <td>The received response</td>
    </tr>
<tr>
<td><code>data.cause</code></td>
      <td><code>String</code></td>
      <td>The reason phrase associated with the SIP response code.</td>
    </tr>
</tbody>
</table><h3 id="failed"><code>failed</code></h3>

<p>Fired when the request fails, whether due to an unsuccessful final response or due to timeout, transport, or other error.</p>

<h4 id="onfailed-function-data-"><code>on('failed', function (data) {})</code></h4>

<table>
<thead><tr>
<th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr></thead>
<tbody>
<tr>
<td><code>data</code></td>
      <td><code>Object</code></td>
      <td>A wrapper object containing the event data</td>
    </tr>
<tr>
<td><code>data.code</code></td>
      <td><code>Integer</code></td>
      <td>The status code of the received response, between 300 and 699, or 0 if the failure was not due to a received response.</td>
    </tr>
<tr>
<td><code>data.response</code></td>
      <td><a href="/api/devel/incomingResponse/"><code>SIP.IncomingResponse|null</code></a></td>
      <td>The received response, or <code>null</code> if the failure was not due to a received response.</td>
    </tr>
<tr>
<td><code>data.cause</code></td>
      <td><code>String</code></td>
      <td>The reason phrase associated with the SIP response code, or one of <code>SIP.C.causes</code> if the failure was not due to a received response.</td>
    </tr>
</tbody>
</table>
    </div>

		<div id="js-sidebar" class="sidebar-shell">
  <div class="js-toggle-list sidebar-module expandable">
    <ul>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel">Overview</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/#features">Features</a></li>
          <li><a href="/api/devel/#sip-standards">SIP Standards</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/ua/">SIP.UA</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/ua/#construction">Construction</a></li>
          <li><a href="/api/devel/ua/#instance-attributes">Instance Attributes</a></li>
          <li><a href="/api/devel/ua/#instance-methods">Instance Methods</a></li>
          <li><a href="/api/devel/ua/#events">Events</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/context/">Contexts (Client/Server)</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/context/client/">SIP.ClientContext</a></li>
          <li><a href="/api/devel/context/server/">SIP.ServerContext</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/session/">SIP.Session</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/session/#construction">Instantiation</a></li>
          <li><a href="/api/devel/session/#instance-attributes">Instance Attributes</a></li>
          <li><a href="/api/devel/session/#instance-methods">Instance Methods</a></li>
          <li><a href="/api/devel/session/#events">Events</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/message/">SIP.Message</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/message/#instance-attributes">Instance Attributes</a></li>
          <li><a href="/api/devel/message/#instance-methods">Instance Methods</a></li>
          <li><a href="/api/devel/message/#events">Events</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/uri/">SIP.URI</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/uri/#instantiation">Instantiation</a></li>
          <li><a href="/api/devel/uri/#instance-methods">Instance Methods</a></li>
          <li><a href="/api/devel/uri/#events">Events</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/eventEmitter/">SIP.EventEmitter</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/eventEmitter/#construction">Construction</a></li>
          <li><a href="/api/devel/eventEmitter/#instance-methods">Instance Methods</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3><a href="#" class="js-expand-btn collapsed arrow-btn"></a><a href="/api/devel/ua_configuration_parameters/">UA Configuration Parameters</a></h3>
        <ul class="js-guides">
          <li><a href="/api/devel/ua_configuration_parameters/#mandatory-parameters">Mandatory Parameters</a></li>
          <li><a href="/api/devel/ua_configuration_parameters/#optional-parameters">Optional Parameters</a></li>
        </ul>
      </li>
    </ul>
  </div> <!-- /sidebar-module -->
</div><!-- /sidebar-shell -->

  </div><!-- #wrapper -->
		
	<div id="footer" >
  <div class="lower_footer">
    <ul class="footer-cell">
      <li><a href="https://groups.google.com/forum/#!forum/sip_js">Mailing List</a></li>				
      <li><a href="https://github.com/onsip/sip.js/issues">Report Issues</a></li>		
      <li><a href="/license/">License</a></li>
    </ul>

    <span class="footer-cell">
      <a href="https://www.onsip.com" class="mega-icon mega-icon-invertocat"></a>
    </span>

    <ul class="footer-cell">
      <li><a href="https://onsip.com/blog">Blog</a></li>
      <li><a href="/aboutus/">About</a></li>
    </ul>
  </div>
  
  <div class="wrapper">
  </div>

</div><!-- /#footer -->

<script src="/shared/js/retina.js" type="text/javascript"></script>

</body>
</html>
